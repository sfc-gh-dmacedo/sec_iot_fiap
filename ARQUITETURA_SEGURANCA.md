# ğŸ—ï¸ Arquitetura de SeguranÃ§a - Demo IoT AWS

## Diagrama de Arquitetura Completo

---

## ğŸ“Š VisÃ£o Geral da Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DEMONSTRAÃ‡ÃƒO IoT SECURITY                        â”‚
â”‚                              MBA FIAP 2025                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          AMBIENTE LOCAL                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Jupyter Notebook (Localhost)                       â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚  demo_jupyter_local.py (11 cÃ©lulas)                      â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ“¦ Biblioteca: paho-mqtt                                â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ Python 3.x                                           â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                          â–²                                      â”‚    â”‚
â”‚  â”‚                          â”‚                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ“ Pasta certs/                                         â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ” sensor-01-certificate.pem.crt  (Identidade)         â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ”‘ sensor-01-private.pem.key      (Chave privada)      â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ›ï¸  AmazonRootCA1.pem             (CA raiz)            â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ ğŸ”’ TLS 1.2+ (Porta 8883)
                                    â”‚ ğŸ” mTLS Authentication
                                    â”‚ ğŸ“¡ Protocolo MQTT
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          AWS CLOUD (us-east-1)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    AWS IoT Core                                 â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚  ğŸŒ IoT Endpoint                                         â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  [account-id].iot.us-east-1.amazonaws.com:8883          â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  âœ… Valida certificado X.509                            â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  âœ… Valida assinatura CA                                â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                          â–²                                      â”‚    â”‚
â”‚  â”‚                          â”‚                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ” Camada de AutenticaÃ§Ã£o (mTLS)                       â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  1. Cliente apresenta certificado X.509                 â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  2. Servidor AWS valida certificado contra CA           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  3. Cliente valida servidor AWS (Root CA)               â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  4. Handshake TLS bem-sucedido                          â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                          â–²                                      â”‚    â”‚
â”‚  â”‚                          â”‚                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ›¡ï¸  Camada de AutorizaÃ§Ã£o (IoT Policy)                 â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ“„ SecureIoTDemoPolicy                                  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  âœ… PERMITIDO:                                           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     - iot/security/demo/sensor01/*                       â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  âŒ BLOQUEADO:                                           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     - iot/production/*                                   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     - iot/other/*                                        â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     - Qualquer outro tÃ³pico                              â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                          â–²                                      â”‚    â”‚
â”‚  â”‚                          â”‚                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ·ï¸  IoT Thing: sensor-01-secure                         â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Vinculado ao certificado                              â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Vinculado Ã  polÃ­tica                                  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Representa o dispositivo virtual                      â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                          â–²                                      â”‚    â”‚
â”‚  â”‚                          â”‚                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ“Š MQTT Broker (Gerenciado pela AWS)                    â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Roteia mensagens entre tÃ³picos                        â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Aplica polÃ­ticas de acesso                            â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Registra tentativas de acesso (CloudWatch)            â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                          â–²                                      â”‚    â”‚
â”‚  â”‚                          â”‚                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ” MQTT Test Client (Console AWS)                       â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Subscribe: # (todos os tÃ³picos)                       â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Visualiza mensagens permitidas                        â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ NÃƒO visualiza mensagens bloqueadas                    â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Camadas de SeguranÃ§a (Defense in Depth)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        6 CAMADAS DE SEGURANÃ‡A                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ğŸŒ INTERNET
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CAMADA 1: Criptografia de Transporte                                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚ ğŸ”’ TLS 1.2+                                                              â”‚
â”‚ â€¢ Criptografia AES-256                                                   â”‚
â”‚ â€¢ ProteÃ§Ã£o contra MITM (Man-in-the-Middle)                              â”‚
â”‚ â€¢ Integridade de dados (HMAC)                                            â”‚
â”‚ â€¢ Porta: 8883 (MQTT over TLS)                                            â”‚
â”‚                                                                          â”‚
â”‚ âŒ AMEAÃ‡AS BLOQUEADAS:                                                   â”‚
â”‚    â€¢ InterceptaÃ§Ã£o de mensagens                                          â”‚
â”‚    â€¢ ModificaÃ§Ã£o de dados em trÃ¢nsito                                    â”‚
â”‚    â€¢ Espionagem (sniffing)                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CAMADA 2: AutenticaÃ§Ã£o MÃºtua (mTLS)                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚ ğŸ” Mutual TLS Authentication                                             â”‚
â”‚ â€¢ Cliente autentica servidor (valida Root CA AWS)                       â”‚
â”‚ â€¢ Servidor autentica cliente (valida certificado X.509)                 â”‚
â”‚ â€¢ Sem certificado vÃ¡lido = SEM ACESSO                                    â”‚
â”‚                                                                          â”‚
â”‚ âŒ AMEAÃ‡AS BLOQUEADAS:                                                   â”‚
â”‚    â€¢ Dispositivos nÃ£o autorizados                                        â”‚
â”‚    â€¢ Servidores falsos (phishing)                                        â”‚
â”‚    â€¢ Acesso sem credenciais                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CAMADA 3: Identidade Digital (X.509)                                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚ ğŸ“œ Certificados X.509                                                    â”‚
â”‚ â€¢ Identidade Ãºnica por dispositivo                                      â”‚
â”‚ â€¢ Assinado por CA (Certificate Authority)                               â”‚
â”‚ â€¢ NÃ£o pode ser falsificado                                               â”‚
â”‚ â€¢ Pode ser revogado (Certificate Revocation)                             â”‚
â”‚                                                                          â”‚
â”‚ âŒ AMEAÃ‡AS BLOQUEADAS:                                                   â”‚
â”‚    â€¢ Dispositivos clonados                                               â”‚
â”‚    â€¢ Roubo de identidade                                                 â”‚
â”‚    â€¢ Certificados expirados                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CAMADA 4: PolÃ­ticas Granulares (IoT Policy)                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚ ğŸ›¡ï¸  Least Privilege Principle                                           â”‚
â”‚ â€¢ PermissÃµes especÃ­ficas por tÃ³pico                                     â”‚
â”‚ â€¢ AÃ§Ãµes permitidas: connect, publish, subscribe, receive                â”‚
â”‚ â€¢ Scope restrito: iot/security/demo/sensor01/*                          â”‚
â”‚                                                                          â”‚
â”‚ âœ… PERMITIDO:                                                            â”‚
â”‚    â€¢ iot/security/demo/sensor01/temperature  â†’ âœ…                       â”‚
â”‚    â€¢ iot/security/demo/sensor01/commands     â†’ âœ…                       â”‚
â”‚                                                                          â”‚
â”‚ âŒ BLOQUEADO:                                                            â”‚
â”‚    â€¢ iot/production/data                     â†’ âŒ                       â”‚
â”‚    â€¢ iot/other/topic                         â†’ âŒ                       â”‚
â”‚                                                                          â”‚
â”‚ âŒ AMEAÃ‡AS BLOQUEADAS:                                                   â”‚
â”‚    â€¢ Dispositivo comprometido = dano limitado                            â”‚
â”‚    â€¢ Acesso a recursos nÃ£o autorizados                                   â”‚
â”‚    â€¢ EscalaÃ§Ã£o de privilÃ©gios                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CAMADA 5: VinculaÃ§Ã£o Thing-Certificate-Policy                           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚ ğŸ”— Relacionamento Seguro                                                 â”‚
â”‚                                                                          â”‚
â”‚    [Thing: sensor-01-secure]                                             â”‚
â”‚              â”‚                                                           â”‚
â”‚              â”œâ”€â”€â”€â”€ Attached to â”€â”€â”€â–º [Certificate: xxx]                  â”‚
â”‚              â”‚                              â”‚                            â”‚
â”‚              â””â”€â”€â”€â”€ Attached to â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â–º [Policy: SecureIoT]   â”‚
â”‚                                                                          â”‚
â”‚ â€¢ Thing sÃ³ pode usar certificado vinculado                               â”‚
â”‚ â€¢ Certificado herda permissÃµes da polÃ­tica                               â”‚
â”‚ â€¢ Sem vinculaÃ§Ã£o = sem acesso                                            â”‚
â”‚                                                                          â”‚
â”‚ âŒ AMEAÃ‡AS BLOQUEADAS:                                                   â”‚
â”‚    â€¢ Certificado usado em Thing errado                                   â”‚
â”‚    â€¢ PolÃ­tica aplicada a dispositivo nÃ£o autorizado                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CAMADA 6: Auditoria e Monitoramento                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚ ğŸ“Š AWS CloudWatch Logs                                                   â”‚
â”‚ â€¢ Todas tentativas de conexÃ£o registradas                               â”‚
â”‚ â€¢ Todas tentativas de publish/subscribe registradas                     â”‚
â”‚ â€¢ Bloqueios por polÃ­tica registrados                                     â”‚
â”‚ â€¢ Alertas em tempo real (opcional)                                       â”‚
â”‚                                                                          â”‚
â”‚ ğŸ” Visibilidade Total:                                                   â”‚
â”‚    â€¢ Quem tentou conectar?                                               â”‚
â”‚    â€¢ Qual certificado foi usado?                                         â”‚
â”‚    â€¢ Qual aÃ§Ã£o foi bloqueada?                                            â”‚
â”‚    â€¢ Quando ocorreu?                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Fluxo de AutenticaÃ§Ã£o e AutorizaÃ§Ã£o (mTLS)

### Passo a Passo Detalhado

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FLUXO COMPLETO: Cliente â†’ AWS IoT Core                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FASE 1: HANDSHAKE TLS (AutenticaÃ§Ã£o MÃºtua)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   [Cliente: Jupyter]                      [Servidor: AWS IoT Core]
         â”‚                                           â”‚
         â”‚  1. ClientHello (TLS 1.2+)               â”‚
         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
         â”‚                                           â”‚
         â”‚  2. ServerHello + Certificado Servidor   â”‚
         â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
         â”‚                                           â”‚
         â”‚  ğŸ” Cliente valida certificado do        â”‚
         â”‚     servidor contra AmazonRootCA1.pem    â”‚
         â”‚                                           â”‚
         â”‚  3. Certificado Cliente (X.509)          â”‚
         â”‚     + Chave Privada (assinatura)         â”‚
         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
         â”‚                                           â”‚
         â”‚                                           â”‚  ğŸ” Servidor valida:
         â”‚                                           â”‚     â€¢ Certificado X.509
         â”‚                                           â”‚     â€¢ Assinatura CA
         â”‚                                           â”‚     â€¢ Certificado ativo
         â”‚                                           â”‚
         â”‚  4. âœ… TLS Handshake Completo            â”‚
         â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
         â”‚                                           â”‚
         â”‚  ğŸ” ConexÃ£o criptografada estabelecida   â”‚
         â”‚                                           â”‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

FASE 2: CONEXÃƒO MQTT (Protocolo de AplicaÃ§Ã£o)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   [Cliente: Jupyter]                      [AWS IoT Core]
         â”‚                                           â”‚
         â”‚  5. MQTT CONNECT                         â”‚
         â”‚     Client ID: sensor-01-secure          â”‚
         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
         â”‚                                           â”‚
         â”‚                                           â”‚  ğŸ” Valida:
         â”‚                                           â”‚     â€¢ Thing existe?
         â”‚                                           â”‚     â€¢ Certificado vinculado?
         â”‚                                           â”‚     â€¢ PolÃ­tica permite connect?
         â”‚                                           â”‚
         â”‚  6. âœ… MQTT CONNACK (Success)            â”‚
         â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
         â”‚                                           â”‚
         â”‚  ğŸ‰ Dispositivo conectado!               â”‚
         â”‚                                           â”‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

FASE 3: PUBLICAÃ‡ÃƒO EM TÃ“PICO PERMITIDO (CÃ©lula 7)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   [Cliente: Jupyter]                      [AWS IoT Core]
         â”‚                                           â”‚
         â”‚  7. MQTT PUBLISH                         â”‚
         â”‚     Topic: iot/security/demo/sensor01/   â”‚
         â”‚            temperature                    â”‚
         â”‚     Payload: {"temp": 25.3}              â”‚
         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
         â”‚                                           â”‚
         â”‚                                           â”‚  ğŸ” Valida polÃ­tica:
         â”‚                                           â”‚  
         â”‚                                           â”‚  Policy: SecureIoTDemoPolicy
         â”‚                                           â”‚  Resource: iot/security/demo/
         â”‚                                           â”‚            sensor01/*
         â”‚                                           â”‚  Action: iot:Publish
         â”‚                                           â”‚  
         â”‚                                           â”‚  âœ… MATCH! Permitido
         â”‚                                           â”‚
         â”‚                                           â”‚  8. Roteia mensagem
         â”‚                                           â”‚     para MQTT Broker
         â”‚                                           â”‚         â”‚
         â”‚                                           â”‚         â–¼
         â”‚                                           â”‚  [MQTT Test Client]
         â”‚                                           â”‚  âœ… Mensagem aparece!
         â”‚                                           â”‚
         â”‚  9. âœ… PUBACK (ConfirmaÃ§Ã£o)              â”‚
         â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
         â”‚                                           â”‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

FASE 4: PUBLICAÃ‡ÃƒO EM TÃ“PICO BLOQUEADO (CÃ©lula 8) â­â­â­
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   [Cliente: Jupyter]                      [AWS IoT Core]
         â”‚                                           â”‚
         â”‚  10. MQTT PUBLISH                        â”‚
         â”‚      Topic: iot/production/data          â”‚
         â”‚      Payload: {"hack": "attempt"}        â”‚
         â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
         â”‚                                           â”‚
         â”‚                                           â”‚  ğŸ” Valida polÃ­tica:
         â”‚                                           â”‚  
         â”‚                                           â”‚  Policy: SecureIoTDemoPolicy
         â”‚                                           â”‚  Resource: iot/security/demo/
         â”‚                                           â”‚            sensor01/*
         â”‚                                           â”‚  Action: iot:Publish
         â”‚                                           â”‚  
         â”‚                                           â”‚  âŒ NO MATCH!
         â”‚                                           â”‚  
         â”‚                                           â”‚  TÃ³pico "iot/production/data"
         â”‚                                           â”‚  NÃƒO estÃ¡ em recursos permitidos
         â”‚                                           â”‚  
         â”‚                                           â”‚  ğŸ›¡ï¸  BLOQUEADO!
         â”‚                                           â”‚
         â”‚                                           â”‚  11. Registra tentativa
         â”‚                                           â”‚      em CloudWatch Logs
         â”‚                                           â”‚
         â”‚                                           â”‚  12. âŒ NÃƒO roteia mensagem
         â”‚                                           â”‚
         â”‚                                           â”‚  [MQTT Test Client]
         â”‚                                           â”‚  âŒ Nenhuma mensagem!
         â”‚                                           â”‚
         â”‚  13. âŒ Sem confirmaÃ§Ã£o (timeout)        â”‚
         â”‚                                           â”‚
         â”‚  ğŸ’¡ Cliente detecta: nÃ£o confirmado      â”‚
         â”‚                                           â”‚

ğŸ¯ ESTE Ã‰ O MOMENTO-CHAVE DA DEMONSTRAÃ‡ÃƒO!

Mesmo com:
  âœ… Certificado vÃ¡lido
  âœ… AutenticaÃ§Ã£o bem-sucedida (mTLS)
  âœ… ConexÃ£o estabelecida

A polÃ­tica IoT BLOQUEIA a publicaÃ§Ã£o porque:
  âŒ TÃ³pico "iot/production/data" nÃ£o estÃ¡ na lista permitida

Isso demonstra:
  ğŸ›¡ï¸  PrincÃ­pio do Menor PrivilÃ©gio
  ğŸ›¡ï¸  AutenticaÃ§Ã£o â‰  AutorizaÃ§Ã£o ilimitada
  ğŸ›¡ï¸  Dispositivo comprometido = dano contido

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

## ğŸ“‹ PolÃ­tica IoT: AnÃ¡lise Detalhada

### Estrutura JSON da PolÃ­tica

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "iot:Connect",
      "Resource": "arn:aws:iot:us-east-1:[ACCOUNT_ID]:client/sensor-01-secure"
    },
    {
      "Effect": "Allow",
      "Action": "iot:Publish",
      "Resource": "arn:aws:iot:us-east-1:[ACCOUNT_ID]:topic/iot/security/demo/sensor01/*"
    },
    {
      "Effect": "Allow",
      "Action": ["iot:Subscribe", "iot:Receive"],
      "Resource": "arn:aws:iot:us-east-1:[ACCOUNT_ID]:topicfilter/iot/security/demo/sensor01/*"
    }
  ]
}
```

### Mapeamento Visual

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    POLÃTICA IoT: SecureIoTDemoPolicy                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STATEMENT 1: ConexÃ£o
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Effect:   Allow
Action:   iot:Connect
Resource: arn:aws:iot:us-east-1:[ACCOUNT]:client/sensor-01-secure

ğŸ”‘ Permite que o dispositivo se conecte ao AWS IoT Core
âœ… Client ID deve ser EXATAMENTE: sensor-01-secure
âŒ Qualquer outro Client ID = BLOQUEADO

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STATEMENT 2: PublicaÃ§Ã£o (Publish)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Effect:   Allow
Action:   iot:Publish
Resource: arn:aws:iot:us-east-1:[ACCOUNT]:topic/iot/security/demo/sensor01/*

ğŸ”‘ Permite publicar mensagens em tÃ³picos especÃ­ficos

âœ… PERMITIDO:
   â€¢ iot/security/demo/sensor01/temperature   â† CÃ©lula 7
   â€¢ iot/security/demo/sensor01/humidity
   â€¢ iot/security/demo/sensor01/commands      â† CÃ©lula 9
   â€¢ iot/security/demo/sensor01/[qualquer]

âŒ BLOQUEADO:
   â€¢ iot/production/data                      â† CÃ©lula 8 (DEMO!)
   â€¢ iot/security/demo/sensor02/temperature
   â€¢ iot/other/topic
   â€¢ qualquer outro tÃ³pico fora do escopo

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STATEMENT 3: Assinatura e Recebimento (Subscribe + Receive)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Effect:   Allow
Action:   ["iot:Subscribe", "iot:Receive"]
Resource: arn:aws:iot:us-east-1:[ACCOUNT]:topicfilter/iot/security/demo/sensor01/*

ğŸ”‘ Permite assinar tÃ³picos e receber mensagens

âœ… PERMITIDO:
   â€¢ iot/security/demo/sensor01/commands      â† CÃ©lula 9 (subscribe)
   â€¢ iot/security/demo/sensor01/+             â† Wildcard dentro do escopo

âŒ BLOQUEADO:
   â€¢ # (todos os tÃ³picos)
   â€¢ iot/production/+
   â€¢ TÃ³picos fora de iot/security/demo/sensor01/*

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

## ğŸ¯ Pontos de ValidaÃ§Ã£o na AWS Console

### Durante a DemonstraÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 VALIDAÃ‡Ã•ES EM TEMPO REAL - AWS CONSOLE                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ANTES DA DEMO (PreparaÃ§Ã£o):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. AWS Console â†’ IoT Core â†’ Test â†’ MQTT test client
   â”œâ”€ Subscribe to topic: #
   â”œâ”€ Deixar visÃ­vel durante toda apresentaÃ§Ã£o
   â””â”€ âœ… Pronto para capturar mensagens

2. AWS Console â†’ IoT Core â†’ Manage â†’ Things
   â”œâ”€ Verificar: sensor-01-secure existe
   â”œâ”€ Certificado: Ativo
   â””â”€ PolÃ­tica: SecureIoTDemoPolicy anexada

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

DURANTE A DEMO (ValidaÃ§Ãµes por cÃ©lula):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“± CÃ‰LULA 6: ConexÃ£o mTLS
   â”‚
   â”œâ”€ Jupyter: "âœ… CONECTADO AO AWS IoT CORE!"
   â”‚
   â””â”€ AWS Console: IoT Core â†’ Monitor â†’ Metrics
      â””â”€ Connections: +1 (opcional, demora um pouco)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“± CÃ‰LULA 7: PublicaÃ§Ã£o PERMITIDA (tÃ³pico autorizado)
   â”‚
   â”œâ”€ Jupyter: "âœ… Mensagem publicada com sucesso!"
   â”‚            "ğŸ“¤ TÃ³pico: iot/security/demo/sensor01/temperature"
   â”‚
   â””â”€ AWS Console: MQTT Test Client
      â””â”€ âœ… MENSAGEM APARECE!
         {
           "device_id": "sensor-01-secure",
           "temperature": 25.3,
           "timestamp": "2025-11-23T10:30:00Z"
         }

ğŸ¯ VALIDAÃ‡ÃƒO: PolÃ­tica permite â†’ Mensagem chega ao broker

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“± CÃ‰LULA 8: PublicaÃ§Ã£o BLOQUEADA (tÃ³pico nÃ£o autorizado) â­â­â­
   â”‚
   â”œâ”€ Jupyter: "âŒ BLOQUEIO DETECTADO!"
   â”‚            "ğŸ›¡ï¸ TÃ³pico: iot/production/data"
   â”‚            "ğŸ’¡ Mesmo autenticado, acesso NEGADO pela polÃ­tica"
   â”‚
   â””â”€ AWS Console: MQTT Test Client
      â””â”€ âŒ NENHUMA MENSAGEM!
         (tela permanece vazia, sem novas mensagens)

ğŸ¯ VALIDAÃ‡ÃƒO: PolÃ­tica bloqueia â†’ Mensagem NÃƒO chega ao broker

ğŸ’¡ ESTE Ã‰ O MOMENTO MAIS IMPORTANTE!
   Mostre que a tela do AWS Console estÃ¡ vazia para este tÃ³pico.
   Isso PROVA que o PrincÃ­pio do Menor PrivilÃ©gio funciona!

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“± CÃ‰LULA 9: Subscribe + Receive (autorizado)
   â”‚
   â”œâ”€ Jupyter:
   â”‚   1. "âœ… Subscribed: iot/security/demo/sensor01/commands"
   â”‚   2. "ğŸ“¤ Publicando comando..."
   â”‚   3. "ğŸ“¬ Mensagem recebida: {'action': 'reboot'}"
   â”‚
   â””â”€ AWS Console: MQTT Test Client
      â””â”€ âœ… MENSAGEM APARECE!
         {
           "action": "reboot",
           "device": "sensor-01-secure"
         }

ğŸ¯ VALIDAÃ‡ÃƒO: Subscribe e Receive funcionam em tÃ³pico autorizado

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

## ğŸ”¢ Resumo: 6 Conceitos de SeguranÃ§a na Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CONCEITOS DEMONSTRADOS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  1ï¸âƒ£  CRIPTOGRAFIA EM TRÃ‚NSITO (TLS 1.2+)                            â”‚
â”‚      â””â”€ Camada: Transporte (porta 8883)                             â”‚
â”‚      â””â”€ Valida: CÃ©lula 6 (conexÃ£o TLS estabelecida)                 â”‚
â”‚                                                                      â”‚
â”‚  2ï¸âƒ£  AUTENTICAÃ‡ÃƒO MÃšTUA (mTLS)                                      â”‚
â”‚      â””â”€ Camada: AplicaÃ§Ã£o (handshake TLS)                           â”‚
â”‚      â””â”€ Valida: CÃ©lula 6 (cliente e servidor se autenticam)         â”‚
â”‚                                                                      â”‚
â”‚  3ï¸âƒ£  IDENTIDADE DIGITAL (X.509)                                     â”‚
â”‚      â””â”€ Camada: Certificados                                        â”‚
â”‚      â””â”€ Valida: CÃ©lula 5 (certificado carregado)                    â”‚
â”‚                                                                      â”‚
â”‚  4ï¸âƒ£  POLÃTICAS GRANULARES (IoT Policy)                              â”‚
â”‚      â””â”€ Camada: AutorizaÃ§Ã£o                                         â”‚
â”‚      â””â”€ Valida: CÃ©lulas 7 e 8 (permitido vs bloqueado)              â”‚
â”‚                                                                      â”‚
â”‚  5ï¸âƒ£  PRINCÃPIO DO MENOR PRIVILÃ‰GIO                                  â”‚
â”‚      â””â”€ Camada: Arquitetura                                         â”‚
â”‚      â””â”€ Valida: CÃ©lula 8 (bloqueio mesmo autenticado)               â”‚
â”‚                                                                      â”‚
â”‚  6ï¸âƒ£  VALIDAÃ‡ÃƒO OBRIGATÃ“RIA (Sem ExceÃ§Ãµes)                           â”‚
â”‚      â””â”€ Camada: Enforcement                                         â”‚
â”‚      â””â”€ Valida: Todas as cÃ©lulas (sem bypass)                       â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Para ApresentaÃ§Ã£o MBA

### Slides Sugeridos

```
SLIDE 1: Arquitetura Geral
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Diagrama: Cliente (Jupyter) â†’ Internet â†’ AWS IoT Core
â€¢ Destacar: TLS 1.2+ na conexÃ£o (porta 8883)
â€¢ Falar: "Arquitetura simples, seguranÃ§a robusta"

SLIDE 2: Camadas de SeguranÃ§a (Defense in Depth)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Diagrama: 6 camadas empilhadas
â€¢ Destacar: Cada camada protege independentemente
â€¢ Falar: "Se uma falhar, outras mantÃªm proteÃ§Ã£o"

SLIDE 3: Fluxo mTLS (AutenticaÃ§Ã£o MÃºtua)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Diagrama: Handshake TLS passo a passo
â€¢ Destacar: Cliente E servidor se autenticam
â€¢ Falar: "ConfianÃ§a mÃºtua: ambos validam identidade"

SLIDE 4: PolÃ­ticas IoT (AutorizaÃ§Ã£o Granular)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Diagrama: Policy JSON com recursos permitidos/bloqueados
â€¢ Destacar: Escopo restrito (iot/security/demo/sensor01/*)
â€¢ Falar: "AutenticaÃ§Ã£o nÃ£o significa autorizaÃ§Ã£o total"

SLIDE 5: PrincÃ­pio do Menor PrivilÃ©gio (Momento-Chave)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Diagrama: CÃ©lula 8 tentando acesso negado
â€¢ Destacar: âœ… Autenticado, mas âŒ Bloqueado
â€¢ Falar: "Este bloqueio Ã© uma VITÃ“RIA, nÃ£o falha!"
```

---

## ğŸ’¡ Mensagens-Chave para a ApresentaÃ§Ã£o

### O que enfatizar:

```
1ï¸âƒ£  "SeguranÃ§a em camadas (Defense in Depth)"
    â†’ Se uma camada falhar, outras protegem

2ï¸âƒ£  "AutenticaÃ§Ã£o forte (mTLS + X.509)"
    â†’ Sem certificado vÃ¡lido = sem acesso

3ï¸âƒ£  "AutorizaÃ§Ã£o granular (IoT Policies)"
    â†’ Cada dispositivo sÃ³ acessa o que precisa

4ï¸âƒ£  "PrincÃ­pio do Menor PrivilÃ©gio"
    â†’ Dispositivo comprometido = dano limitado

5ï¸âƒ£  "Bloqueio nÃ£o Ã© falha, Ã© proteÃ§Ã£o!"
    â†’ CÃ©lula 8 demonstra seguranÃ§a funcionando

6ï¸âƒ£  "Zero Trust: validaÃ§Ã£o obrigatÃ³ria"
    â†’ Sem exceÃ§Ãµes, sem bypass
```

---

**Pronto para apresentar a arquitetura de seguranÃ§a! ğŸ—ï¸ğŸ”ğŸš€**

